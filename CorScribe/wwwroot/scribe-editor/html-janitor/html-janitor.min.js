!function(e,t){"function"==typeof define&&define.amd?define("html-janitor",t):"object"==typeof exports?module.exports=t():e.HTMLJanitor=t()}(this,function(){function e(e){var t=e.tags,n=Object.keys(t),i=n.map(function(e){return typeof t[e]}).every(function(e){return"object"===e||"boolean"===e||"function"===e});if(!i)throw new Error("The configuration was invalid");this.config=e}function t(e){return-1!==f.indexOf(e.nodeName)}function n(e){return-1!==d.indexOf(e.nodeName)}function i(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function o(e,t,n){return"function"==typeof e.tags[t]?e.tags[t](n):e.tags[t]}function r(e,t){return"undefined"==typeof t?!0:"boolean"==typeof t?!t:!1}function a(e,t,n){var i=e.name.toLowerCase();return t===!0?!1:"function"==typeof t[i]?!t[i](e.value,n):"undefined"==typeof t[i]?!0:t[i]===!1?!0:"string"==typeof t[i]?t[i]!==e.value:!1}var f=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],d=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return e.prototype.clean=function(e){var t=document.createElement("div");return t.innerHTML=e,this._sanitize(t),t.innerHTML},e.prototype._sanitize=function(e){var f=i(e),d=f.firstChild();if(d)do if(!d._sanitized)if(d.nodeType!==Node.TEXT_NODE){if(d.nodeType===Node.COMMENT_NODE){e.removeChild(d),this._sanitize(e);break}var s,u=n(d);u&&(s=Array.prototype.some.call(d.childNodes,t));var l=!!e.parentNode,c=t(e)&&t(d)&&l,m=d.nodeName.toLowerCase(),p=o(this.config,m,d),h=u&&s;if(h||r(d,p)||!this.config.keepNestedBlockElements&&c){if("SCRIPT"!==d.nodeName&&"STYLE"!==d.nodeName)for(;d.childNodes.length>0;)e.insertBefore(d.childNodes[0],d);e.removeChild(d),this._sanitize(e);break}for(var N=0;N<d.attributes.length;N+=1){var v=d.attributes[N];a(v,p,d)&&(d.removeAttribute(v.name),N-=1)}this._sanitize(d),d._sanitized=!0}else if(""===d.data.trim()&&(d.previousElementSibling&&t(d.previousElementSibling)||d.nextElementSibling&&t(d.nextElementSibling))){e.removeChild(d),this._sanitize(e);break}while(d=f.nextSibling())},e});
//# sourceMappingURL=html-janitor.min.js.map